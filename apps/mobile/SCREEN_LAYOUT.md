# 画面構成とレイアウト

このドキュメントでは、Mottainai在庫管理アプリの各画面のレイアウトを説明します。

## 画面遷移図

```
┌─────────────────┐
│  在庫一覧画面    │ ← アプリ起動時
│   (index.tsx)   │
└────┬─────┬──────┘
     │     │
     │     └──────────┐
     │                │
     ▼                ▼
┌─────────────┐  ┌──────────────┐
│バーコード    │  │  商品追加     │
│スキャン画面  │  │  (add.tsx)   │
│(scanner.tsx) │  └──────────────┘
└─────────────┘
     │
     ▼
┌──────────────┐
│  商品詳細     │
│(item/[id].tsx)│
└──────────────┘
```

## 1. 在庫一覧画面 (index.tsx)

### 空の状態

```
┌─────────────────────────────────────┐
│  在庫一覧                    [≡]    │
├─────────────────────────────────────┤
│                                     │
│  ┌──────────────┐ ┌──────────────┐ │
│  │   📷 スキャン │ │   ➕ 追加    │ │
│  └──────────────┘ └──────────────┘ │
│                                     │
│                                     │
│        商品が登録されていません      │
│                                     │
│                                     │
│                                     │
└─────────────────────────────────────┘
```

### 商品がある状態

```
┌─────────────────────────────────────┐
│  在庫一覧                    [≡]    │
├─────────────────────────────────────┤
│  ┌──────────────┐ ┌──────────────┐ │
│  │   📷 スキャン │ │   ➕ 追加    │ │
│  └──────────────┘ └──────────────┘ │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ テスト商品                      │ │
│ │ JAN: 4901234567890             │ │
│ │ 在庫: 10        ¥1,000         │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ サンプル商品                    │ │
│ │ JAN: 4901234567891             │ │
│ │ 在庫: 5         ¥2,500         │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

**要素:**
- ヘッダー: "在庫一覧"
- 2つのボタン:
  - スキャンボタン (青色、カメラアイコン)
  - 追加ボタン (緑色、プラスアイコン)
- 商品カードリスト:
  - 商品名 (大きいフォント)
  - JANコード
  - 在庫数と価格

## 2. バーコードスキャン画面 (scanner.tsx)

```
┌─────────────────────────────────────┐
│ ← バーコードスキャン                │
├─────────────────────────────────────┤
│                                     │
│         ┌─────────────┐             │
│         │             │             │
│         │   CAMERA    │             │
│         │    VIEW     │             │
│         │             │             │
│         │ ┌─────────┐ │             │
│         │ │         │ │             │
│         │ │スキャン │ │             │
│         │ │ エリア  │ │             │
│         │ │         │ │             │
│         │ └─────────┘ │             │
│         │             │             │
│         └─────────────┘             │
│                                     │
│   JANコードをスキャンしてください   │
│                                     │
└─────────────────────────────────────┘
```

**要素:**
- カメラビュー（全画面）
- 半透明オーバーレイ（暗い背景）
- 中央にスキャンエリア（白い枠線）
- ガイドテキスト

**動作:**
- JANコードを検出 → 既存商品なら詳細画面へ
- JANコードを検出 → 新規なら登録確認ダイアログ

## 3. 商品追加画面 (add.tsx)

```
┌─────────────────────────────────────┐
│ ← 商品追加                           │
├─────────────────────────────────────┤
│                                     │
│  JANコード *                        │
│  ┌───────────────────────────────┐  │
│  │ 4901234567890                │  │
│  └───────────────────────────────┘  │
│                                     │
│  商品名 *                            │
│  ┌───────────────────────────────┐  │
│  │ テスト商品                     │  │
│  └───────────────────────────────┘  │
│                                     │
│  説明                                │
│  ┌───────────────────────────────┐  │
│  │ これはテスト商品です           │  │
│  │                               │  │
│  └───────────────────────────────┘  │
│                                     │
│  価格 *                              │
│  ┌───────────────────────────────┐  │
│  │ 1000                          │  │
│  └───────────────────────────────┘  │
│                                     │
│  初期在庫数 *                        │
│  ┌───────────────────────────────┐  │
│  │ 10                            │  │
│  └───────────────────────────────┘  │
│                                     │
│  ┌───────────────────────────────┐  │
│  │         登録                   │  │
│  └───────────────────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

**要素:**
- 入力フォーム:
  - JANコード (13桁の数字、必須)
  - 商品名 (テキスト、必須)
  - 説明 (複数行テキスト、任意)
  - 価格 (数値、必須)
  - 初期在庫数 (数値、必須)
- 登録ボタン (青色)

**バリデーション:**
- JANコード: 13桁の数字のみ
- 商品名: 空欄不可
- 価格/在庫: 0以上の数値

## 4. 商品詳細画面 (item/[id].tsx)

```
┌─────────────────────────────────────┐
│ ← 商品詳細                           │
├─────────────────────────────────────┤
│                                     │
│  商品名                              │
│  テスト商品                          │
│                                     │
│  JANコード                           │
│  4901234567890                      │
│                                     │
│  説明                                │
│  これはテスト商品です                │
│                                     │
│  価格                                │
│  ¥1,000                             │
│                                     │
│  在庫数                              │
│  10                                 │
│                                     │
│  ───────────────────────────────    │
│                                     │
│  在庫調整                            │
│  ┌───────────────────────────────┐  │
│  │ 5                             │  │
│  └───────────────────────────────┘  │
│  ┌───────────────────────────────┐  │
│  │   ➕ 追加                      │  │
│  └───────────────────────────────┘  │
│  ┌───────────────────────────────┐  │
│  │   ➖ 削減                      │  │
│  └───────────────────────────────┘  │
│                                     │
│  ┌───────────────────────────────┐  │
│  │   🗑️ 削除                      │  │
│  └───────────────────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

**要素:**
- 商品情報表示セクション:
  - 商品名、JANコード、説明、価格、在庫数
- 在庫調整セクション:
  - 数量入力フィールド
  - 追加ボタン (緑色)
  - 削減ボタン (オレンジ色)
- 削除ボタン (赤色)

**動作:**
- 追加/削減: 入力した数量を在庫に加算/減算
- 削除: 確認ダイアログを表示後、商品を削除

## 5. ダイアログ

### 成功ダイアログ

```
┌─────────────────────────────────────┐
│                                     │
│         ┌─────────────┐             │
│         │             │             │
│         │   成功       │             │
│         │             │             │
│         │ 商品を登録  │             │
│         │ しました    │             │
│         │             │             │
│         │  ┌───────┐  │             │
│         │  │  OK  │  │             │
│         │  └───────┘  │             │
│         │             │             │
│         └─────────────┘             │
│                                     │
└─────────────────────────────────────┘
```

### 削除確認ダイアログ

```
┌─────────────────────────────────────┐
│                                     │
│         ┌─────────────┐             │
│         │             │             │
│         │ 削除確認     │             │
│         │             │             │
│         │この商品を    │             │
│         │削除しますか? │             │
│         │             │             │
│         │┌─────────┐  │             │
│         ││キャンセル│  │             │
│         │└─────────┘  │             │
│         │┌─────────┐  │             │
│         ││  削除   │  │             │
│         │└─────────┘  │             │
│         │             │             │
│         └─────────────┘             │
│                                     │
└─────────────────────────────────────┘
```

## カラースキーム

- **プライマリカラー**: 青 (#2196F3) - スキャンボタン、登録ボタン
- **成功カラー**: 緑 (#4CAF50) - 追加ボタン
- **警告カラー**: オレンジ (#FF9800) - 削減ボタン
- **危険カラー**: 赤 (#F44336) - 削除ボタン
- **背景**: ライトグレー (#F5F5F5)
- **カード背景**: 白 (#FFFFFF)
- **テキスト**: ダークグレー (#333333)
- **サブテキスト**: グレー (#666666)

## レスポンシブデザイン

- すべての画面はスクロール可能
- 入力フィールドは画面幅の90%を使用
- ボタンは指で押しやすい最小48dpの高さ
- カード間のマージンは一貫して12dp

## アクセシビリティ

- すべての入力フィールドにラベルあり
- 必須フィールドに「*」マークを表示
- ボタンに明確なアクションテキスト
- エラーメッセージは赤色で目立つように表示
